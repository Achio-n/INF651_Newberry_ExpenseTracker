<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Expense Tracker</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" type="text/css" href="css/main.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
</head>

<body>
  <header class="bg-success text-white py-3 shadow-sm">
    <div class="container d-flex justify-content-between align-items-center flex-wrap">
      <h1 class="mb-0 d-flex align-items-center">
        <i class="bi bi-wallet2 me-2"></i> Expense Tracker
      </h1>
      <div class="d-flex align-items-center gap-3">
        <nav class="d-flex gap-3">
          <a href="#" class="nav-link text-white">Home</a>
          <a href="#" class="nav-link text-white">Reports</a>
          <a href="#" class="nav-link text-white">Settings</a>
        </nav>
        <i class="bi bi-person-circle fs-4"></i>
      </div>
    </div>
  </header>

  <aside class="sidebar left"></aside>
  <aside class="sidebar right"></aside>

  <main>
    <!-- Month, Year Selection -->
    <div class="container my-3 d-flex justify-content-center align-items-center gap-3">
      <label for="month-select" class="form-label mb-0">Month:</label>
      <select id="month-select" class="form-select w-auto">
        <!-- Months options inserted dynamically -->
      </select>

      <label for="year-select" class="form-label mb-0">Year:</label>
      <select id="year-select" class="form-select w-auto">
        <!-- Year options inserted dynamically -->
      </select>
    </div>

    <!-- Income Area -->
    <div class="panel shadow-sm p-3 bg-white rounded" draggable="true" id="income-panel">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="mb-0">ðŸ’° Income Summary</h5>
        <button class="btn btn-primary mb-2" data-bs-toggle="modal" data-bs-target="#addIncomeModal">Add Income</button>
      </div>

      <table class="table table-bordered table-sm">
        <thead>
          <tr>
            <th>Date</th>
            <th>Source</th>
            <th>Amount</th>
            <th class="text-end">Actions</th>
          </tr>
        </thead>
        <tbody id="income-table-body"></tbody>
      </table>
    </div>

    <!-- Modal for Adding Income -->
    <div class="modal fade" id="addIncomeModal" tabindex="-1" aria-labelledby="addIncomeModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <form id="income-form">
            <div class="modal-header">
              <h5 class="modal-title" id="addIncomeModalLabel">Add Income</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div class="mb-3">
                <label for="income-date" class="form-label">Date</label>
                <input type="date" class="form-control" id="income-date" required />
              </div>
              <div class="mb-3">
                <label for="income-source" class="form-label">Source</label>
                <input type="text" class="form-control" id="income-source" required />
              </div>
              <div class="mb-3">
                <label for="income-amount" class="form-label">Amount</label>
                <input type="number" step="0.01" class="form-control" id="income-amount" required />
              </div>
            </div>
            <div class="modal-footer">
              <button type="submit" class="btn btn-primary">Add</button>
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <!-- End Income Area -->

    <!-- Expense Area -->
    <div class="panel shadow-sm p-3 bg-white rounded" draggable="true" id="expenses-panel">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="mb-0">ðŸ’¸ Expense Summary</h5>
        <button class="btn btn-primary mb-2" data-bs-toggle="modal" data-bs-target="#addExpenseModal">Add Expense</button>
      </div>

      <table class="table table-bordered table-sm">
        <thead>
          <tr>
            <th>Date</th>
            <th>Category</th>
            <th>Amount</th>
            <th class="text-end">Actions</th>
          </tr>
        </thead>
        <tbody id="expenses-table-body"></tbody>
      </table>
    </div>

    <!-- Modal for Adding Expense -->
    <div class="modal fade" id="addExpenseModal" tabindex="-1" aria-labelledby="addExpenseModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <form id="expense-form">
            <div class="modal-header">
              <h5 class="modal-title" id="addExpenseModalLabel">Add Expense</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div class="mb-3">
                <label for="expense-date" class="form-label">Date</label>
                <input type="date" class="form-control" id="expense-date" required />
              </div>
              <div class="mb-3">
                <label for="expense-category" class="form-label">Category</label>
                <select id="expense-category" class="form-select" required>
                  <!-- options dynamically populated -->
                </select>
              </div>
              <div class="mb-3">
                <label for="expense-amount" class="form-label">Amount</label>
                <input type="number" step="0.01" class="form-control" id="expense-amount" required />
              </div>
            </div>
            <div class="modal-footer">
              <button type="submit" class="btn btn-primary">Add</button>
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <!-- End Expense Area -->

   

    <!-- Budget Area -->
    <div class="panel shadow-sm p-3 bg-white rounded" draggable="true" id="budget-panel">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="mb-0">ðŸ“Š Budget</h5>
        <button class="btn btn-primary mb-2" data-bs-toggle="modal" data-bs-target="#budgetModal">
  Add Budget Entry
</button>
      </div>

      <table class="table table-bordered table-sm">
        <thead>
          <tr>
            <th>Date</th>
            <th>Category</th>
            <th>Amount</th>
            <th class="text-end">Actions</th>
          </tr>
        </thead>
        <tbody id="budget-table-body"></tbody>
      </table>
    </div>

    <!-- Modal for Adding Budget Item -->
    <div class="modal fade" id="budgetModal" tabindex="-1" aria-labelledby="budgetModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <form id="budgetForm" class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="budgetModalLabel">Add Budget Entry</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <label for="budgetCategory" class="form-label">Category</label>
          <select class="form-select" id="budgetCategory" required></select>
        </div>
        <div class="mb-3">
          <label for="budgetAmount" class="form-label">Amount</label>
          <input type="number" class="form-control" id="budgetAmount" required />
        </div>
        <div class="mb-3">
          <label for="budgetMonth" class="form-label">Month</label>
          <select class="form-select" id="budgetMonth" required></select>
        </div>
        <div class="mb-3">
          <label for="budgetYear" class="form-label">Year</label>
          <select class="form-select" id="budgetYear" required></select>
        </div>
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-success">Save</button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
      </div>
    </form>
  </div>
</div>
    <!-- End Budget Area -->
    <!-- Spending by Category Area -->
    <div class="panel" draggable="true" id="spending-category-panel">
  ðŸ“Š Spending by Category
  <div id="spending-category-breakdown" class="mt-3"></div>
</div>

    <!-- End Spending by Category Area -->
    <!-- Overview/Summary Area -->
    <div class="panel" draggable="true">ðŸ§¾ OverView/Summary ðŸ“Š</div>
    <!-- End Overview/Summary Area -->
  </main>

  <footer class="bg-success text-white text-center py-3">
  <nav class="d-flex justify-content-center gap-3">
    <a href="#" class="nav-link text-white" id="privacy-link">Privacy</a>
    <a href="#" class="nav-link text-white" id="terms-link">Terms</a>
    <a href="#" class="nav-link text-white" id="contact-link">Contact</a>
  </nav>
</footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/categories.js"></script>
  <script src="js/dnd.js"></script>
  <script src="js/income.js"></script>
  <script src="js/expenses.js"></script>
  <script src="js/budget.js"></script>
  <script src="js/testData.js"></script>
  <script src="js/categorySpending.js"></script>"

  <script>
    const monthSelect = document.getElementById('month-select');
    const yearSelect = document.getElementById('year-select');

    function populateMonthYearSelectors() {
      const months = [
        "January", "February", "March", "April", "May", "June",
        "July", "August", "September", "October", "November", "December"
      ];

      months.forEach((m, i) => {
        const option = document.createElement('option');
        option.value = i + 1;
        option.textContent = m;
        monthSelect.appendChild(option);
      });

      const currentYear = new Date().getFullYear();
      for (let y = currentYear - 5; y <= currentYear + 5; y++) {
        const option = document.createElement('option');
        option.value = y;
        option.textContent = y;
        yearSelect.appendChild(option);
      }

      monthSelect.value = new Date().getMonth() ;
      yearSelect.value = currentYear;
    }

  // Populate budget modal dropdowns
  function populateBudgetModalDropdowns() {
    const categorySelect = document.getElementById("budgetCategory");
    const monthSelect = document.getElementById("budgetMonth");
    const yearSelect = document.getElementById("budgetYear");

    categorySelect.innerHTML = "";
    categories.forEach(cat => {
      const option = document.createElement("option");
      option.value = cat;
      option.textContent = cat;
      categorySelect.appendChild(option);
    });

    const months = [
      "January", "February", "March", "April", "May", "June",
      "July", "August", "September", "October", "November", "December"
    ];
    monthSelect.innerHTML = "";
    months.forEach((month, index) => {
      const option = document.createElement("option");
      option.value = index + 1;
      option.textContent = month;
      monthSelect.appendChild(option);
    });

    const currentYear = new Date().getFullYear();
    yearSelect.innerHTML = "";
    for (let y = currentYear - 5; y <= currentYear + 5; y++) {
      const option = document.createElement("option");
      option.value = y;
      option.textContent = y;
      yearSelect.appendChild(option);
    }

    // Preselect current month/year
    monthSelect.value = new Date().getMonth() + 1;
    yearSelect.value = currentYear;
  }

  // Wait for the DOM before populating
  document.addEventListener("DOMContentLoaded", populateBudgetModalDropdowns);
    document.addEventListener('DOMContentLoaded', () => {
      populateMonthYearSelectors();
    });
  </script>
  
</body>

</html>
